"use strict";(self.webpackChunkhookah_docs=self.webpackChunkhookah_docs||[]).push([[143],{2484:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"building-blocks/hooks","title":"Hooks","description":"Hooks define where and what to send once an event\'s conditions are satisfied.","source":"@site/docs/building-blocks/hooks.md","sourceDirName":"building-blocks","slug":"/building-blocks/hooks","permalink":"/docs/building-blocks/hooks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Events","permalink":"/docs/building-blocks/events"},"next":{"title":"Templates","permalink":"/docs/building-blocks/templates"}}');var s=o(4848),i=o(8453);const r={sidebar_position:6},d="Hooks",l={},c=[{value:"Hook Structure",id:"hook-structure",level:2},{value:"How Hooks Work",id:"how-hooks-work",level:2},{value:"Important Notes",id:"important-notes",level:2},{value:"Example Hook",id:"example-hook",level:2}];function h(e){const n={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"hooks",children:"Hooks"})}),"\n",(0,s.jsxs)(n.p,{children:["Hooks define ",(0,s.jsx)(n.strong,{children:"where"})," and ",(0,s.jsx)(n.strong,{children:"what"})," to send once an event's conditions are satisfied.",(0,s.jsx)(n.br,{}),"\n","Each event can trigger one or multiple hooks."]}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"hook"})," specifies:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Which external service to notify (e.g., Discord, Slack, custom endpoints)."}),"\n",(0,s.jsx)(n.li,{children:"How to build the outgoing webhook payload (via templates)."}),"\n",(0,s.jsx)(n.li,{children:"Where to fetch the destination URL dynamically from the incoming request."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"hook-structure",children:"Hook Structure"}),"\n",(0,s.jsxs)(n.p,{children:["Each ",(0,s.jsx)(n.code,{children:"hook"})," is defined with the following fields:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "discord",\n  "endpoint_key": "x-discord-url",\n  "body": "template_file_name.some_extension"\n}\n'})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Field"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsxs)(n.td,{children:["A simple label for the hook (e.g., ",(0,s.jsx)(n.code,{children:"discord"}),", ",(0,s.jsx)(n.code,{children:"slack"}),")."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"endpoint_key"})}),(0,s.jsxs)(n.td,{children:["The header key or query parameter from which to extract the ",(0,s.jsx)(n.strong,{children:"target webhook URL"})," dynamically."]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"body"})}),(0,s.jsx)(n.td,{children:"The name of the template file used to render the webhook payload. Must produce valid JSON."})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"how-hooks-work",children:"How Hooks Work"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["When a matching event occurs and all conditions are satisfied, Hookah reads the ",(0,s.jsx)(n.code,{children:"endpoint_key"})," from the incoming\nrequest."]}),"\n",(0,s.jsx)(n.li,{children:"It uses that value as the target URL for the outgoing webhook call."}),"\n",(0,s.jsxs)(n.li,{children:["It renders the template specified in the ",(0,s.jsx)(n.code,{children:"body"})," field, injecting data from the original webhook payload."]}),"\n",(0,s.jsx)(n.li,{children:"It sends the rendered body to the resolved target endpoint."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can configure multiple hooks per event, and they will all be triggered ",(0,s.jsx)(n.strong,{children:"concurrently"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"important-notes",children:"Important Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Dynamic Endpoints"}),": The webhook URL is not hardcoded inside the configuration. Instead, it is dynamically extracted\nat runtime from either:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The request headers."}),"\n",(0,s.jsx)(n.li,{children:"Or the URL query parameters."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Template Rendering"}),":",(0,s.jsx)(n.br,{}),"\n","The ",(0,s.jsx)(n.code,{children:"body"})," field points to a file in your templates' directory. This template can interpolate data from the incoming\nwebhook payload using Go's native template engine."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["After rendering, the final output ",(0,s.jsx)(n.strong,{children:"must be a valid JSON"})," object, because Hookah sends it directly in the body of\nthe outgoing HTTP request."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example-hook",children:"Example Hook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "discord",\n  "endpoint_key": "x-discord-url",\n  "body": "discord_message.tmpl"\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"In this example:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Hookah will fetch the target webhook URL from the ",(0,s.jsx)(n.code,{children:"x-discord-url"})," header (or query parameter)."]}),"\n",(0,s.jsxs)(n.li,{children:["It will render the ",(0,s.jsx)(n.code,{children:"discord_message.tmpl"})," file."]}),"\n",(0,s.jsx)(n.li,{children:"The resulting JSON will be posted to the extracted URL."}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>d});var t=o(6540);const s={},i=t.createContext(s);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);